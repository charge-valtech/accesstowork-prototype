{{<layout}}

{{$pageTitle}}
	Access To Work - Prototype
{{/pageTitle}}

{{$content}}

<main id="content" role="main">

	<h1 class="heading-xlarge">Access to Work</h1>

	<p>{{errors}}</p>	

	<h2 class="heading-large">Prototype Versions</h2>

	<table class="list-bullet index-table">
		<tr>
			<td colspan="4">
				<a href="/accesstowork/">Access to Work prototype</a> 
				<span class="font-xxsmall">(latest version)</span> 
			</td>
		</tr>
		{{#items}}
			<tr>
				<td><a href="/v{{ number }}/">Version {{ number }}</a></td>
				<td><span class="font-xxsmall">{{ date }}</span></td>
				<td> <a class="font-xxsmall" href="/v{{ number }}/diff">diffs</a> </td>
				<td> <a class="font-xxsmall pages-link" href="#" data-num="{{ number }}">pages</a> </td>
			</tr>
		{{/items}}
	</table>


	<h2 class="heading-large">Tests &amp; Design ideas</h2>

	<ul class="list-bullet">
		<li> <a href="/tellmystory/">Tell my Story</a> </li>
		<li> <a href="/safetynet/">Safety net</a> </li>
	</ul>

</main>

<div class="show-pages" style="position:absolute;top:0;left:0;">
hello
</div>

{{/content}}

{{/layout}}

<script type="text/javascript">
	$(document).on('ready',function()
	{
		$('.show-pages').hide();
		$('.pages-link').on('click',function(e)
		{
			e.preventDefault();
			var num = $(this).data('num');
			$('.show-pages').empty();
			$('.show-pages').append('<ul/>');
			$.get('/api/v'+num+'/', {}, function(data, status, xhr)
			{
				for(var i in data[0])
				{
					var d = data[i];
					var link = '<li><a href="/v'+num+'">'+d+'</a></li>'
					$('.show-pages ul').append(link);
				}
			});
			// $('.show-pages').css({top:e.pageY,left:e.pageX});
		});
		
	});
</script>